# general

Wayland works on "objects" that enclose methods. All requests are method invocations on them, and include an object ID. Each object implements an interface and the requests include an opcode that identifies method in the interface to invoke.

# bestiary

* `object`: an entity that surpasses requests/events, and version of a given Wayland protocol.
* `request`: a message sent from a client to server.
* `event`: a message sent from server to a client.
* `wl_surface`: a rectangle that clients draws in. Essentially a window. Has events for whether it's visible.
* `globals`: global resources, stuff like `wl_outputs` *(which displays are connected; also this specific global supplies `wl_registry`)*.
* `wl_registry`: a list of available `globals`.
* `wl_interface`: a struct with a description of protocol object. A list of fields: {protocol name, protocol version, num requests, requests `:: [wl_message]`, num events, events `:: [wl_message]`}
* `wl_message`: a description of a function arguments/return value in Wayland byte-code.

# misc

An extension is basically bunch of callbacks between a client and compositor. Details depends on extension.

Clients are usually using libwayland which to supply callbacks for certain events.

# code generation

Happens through `wayland-scanner` binary. Usage example: `wayland-scanner client-header xdg-shell.xml out.c`. The help output is clear on supported options *(though not on their meaning)*.

# proxy

Represents an object on client side. Docs for `wl_proxy` say it shouldn't be used directly, instead clients should use higher-level interface generated by `wayland-scanner`. `wl_proxy` converts through `wl_proxy_marshal` requests into wire format, and calls handlers set with `wl_proxy_add_listener` when they're coming.

# internals

Basic communication is implemented at `libwayland-server.c`/`libwayland-client.c`.

# references

http://www.jlekstrand.net/jason/projects/wayland/language-bindings-guide/ nice overview of how the xml sticks together with the final code.
http://sircmpwn.github.io/2017/06/10/Introduction-to-Wayland.html wayland from a POV of client.
